
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Intro to Data Wrangling and Tidy Data &#8212; Materials Informatics 101</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e2363ea40746bee74734a24ffefccd78.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Programmatic Data Operations" href="03_data_assignment.html" />
    <link rel="prev" title="Intro to Python and Jupyter Notebooks" href="01_python_assignment.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Materials Informatics 101</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Materials Informatics 101
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../setup.html">
   Software Setup
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../exercises.html">
   Exercise Notebooks
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="00_tabula-webplotdigitizer_assignment.html">
     Data Extraction and Management
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01_python_assignment.html">
     Intro to Python and Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Intro to Data Wrangling and Tidy Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03_data_assignment.html">
     Programmatic Data Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_vis_assignment.html">
     Visualization in Python
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/02_tidy_assignment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/zdelrosario/Materials Informatics 101"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/zdelrosario/Materials Informatics 101/issues/new?title=Issue%20on%20page%20%2Fnotebooks/02_tidy_assignment.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/zdelrosario/Materials Informatics 101/main?urlpath=tree/docs/notebooks/02_tidy_assignment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-outcomes">
   Learning outcomes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q1-complete-the-code-below-to-rename-the-columns">
     <strong>
      Q1
     </strong>
     : Complete the code below to rename the columns
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q2-complete-the-data-dictionary-below-to-document-the-units-associated-with-the-short-column-names">
     <strong>
      Q2
     </strong>
     : Complete the
     <em>
      data dictionary
     </em>
     below to document the units associated with the short column names.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pivoting">
   Pivoting
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tidy-data">
   Tidy Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q3-inspect-the-original-form-of-the-data-why-are-these-data-not-tidy-how-would-you-make-the-data-tidy">
     <strong>
      Q3
     </strong>
     : Inspect the original form of the data. Why are these data not tidy? How would you make the data tidy?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-wrangling">
   Data Wrangling
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#unit-conversion">
     Unit conversion
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q4-convert-the-units-to-mpa">
     <strong>
      Q4
     </strong>
     : Convert the units to MPa.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filtering-invalid-values">
     Filtering invalid values
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#converting-types">
     Converting types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bonus-the-payoff-of-tidying-and-wrangling">
   Bonus: The Payoff of Tidying and Wrangling
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="intro-to-data-wrangling-and-tidy-data">
<h1>Intro to Data Wrangling and Tidy Data<a class="headerlink" href="#intro-to-data-wrangling-and-tidy-data" title="Permalink to this headline">¶</a></h1>
<p><em>Author</em>: Zach del Rosario</p>
<div class="section" id="learning-outcomes">
<h2>Learning outcomes<a class="headerlink" href="#learning-outcomes" title="Permalink to this headline">¶</a></h2>
<p>By working through this notebook, you will be able to:</p>
<ul class="simple">
<li><p>Understand basic principles of working with data in software</p></li>
<li><p>State the basic ideas of tidy data</p></li>
<li><p>State the basic ideas of data wrangling</p></li>
</ul>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>In this day exercise, we’ll make use of the Pandas and Grama packages to work with data. <a class="reference external" href="https://pandas.pydata.org/">Pandas</a> is a package for data analysis, and it supplies the DataFrame object for representing data. <a class="reference external" href="https://github.com/zdelrosario/py_grama">Grama</a> builds on top of Pandas to provide pipeline-based tools for data and machine learning.</p>
<p>This notebook focuses on introducing <em>ideas</em>, the evening notebook will teach you the <em>mechanics</em> of how to use these tools.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">grama</span> <span class="k">as</span> <span class="nn">gr</span>

<span class="n">DF</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Intention</span><span class="p">()</span>

<span class="c1"># For downloading data</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
</div>
</div>
<p>The following code downloads the same data you extracted in the previous day’s Tabula exercise.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filename for local data</span>
<span class="n">filename_data</span> <span class="o">=</span> <span class="s2">&quot;./data/tabula-weibull.csv&quot;</span>

<span class="c1"># The following code downloads the data, or (after downloaded)</span>
<span class="c1"># loads the data from a cached CSV on your machine</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename_data</span><span class="p">):</span>
    <span class="c1"># Make request for data</span>
    <span class="n">url_data</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/zdelrosario/mi101/main/mi101/data/tabula-weibull1939-table4.csv&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url_data</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">filename_data</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Tabula-extracted data downloaded from public Google sheet&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Note data already exists</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Tabula-extracted data loaded locally&quot;</span><span class="p">)</span>
    
<span class="c1"># Read the data into memory</span>
<span class="n">df_tabula</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>These are data on the tensile strength of specimens of stearic acid and plaster-of-paris.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_tabula</span>
</pre></div>
</div>
</div>
</div>
<p>Note that Pandas renamed some columns to avoid giving us duplicate column names. The names are useful for holding metadata, but shorter column names are far easier to work with in a computational environment.</p>
<div class="section" id="q1-complete-the-code-below-to-rename-the-columns">
<h3><strong>Q1</strong>: Complete the code below to rename the columns<a class="headerlink" href="#q1-complete-the-code-below-to-rename-the-columns" title="Permalink to this headline">¶</a></h3>
<p><em>Hint</em>: You can click-and-drag on the DataFrame printout above for a less error-prone way of giving the original column names.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Copy the original column names into the double-quote below</span>
<span class="c1">#       to complete the code and rename the columns with shorter</span>
<span class="c1">#       names.</span>
<span class="c1">###</span>

<span class="n">df_q1</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_tabula</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_rename</span><span class="p">(</span>
<span class="c1">## TASK: Uncomment these lines and fill-in the new (short) column names</span>
<span class="c1">#         obs_1=&quot;&quot;,   # Observation Number, Block 1</span>
<span class="c1">#         area_1=&quot;&quot;,  # Specimen area, Block 1</span>
<span class="c1">#         sigma_1=&quot;&quot;, # Stress, Block 1</span>
<span class="c1">#         obs_2=&quot;&quot;,   # Observation Number, Block 2</span>
<span class="c1">#         area_2=&quot;&quot;,  # Specimen area, Block 2</span>
<span class="c1">#         sigma_2=&quot;&quot;, # Stress, Block 2</span>

    <span class="p">)</span>
<span class="p">)</span>

<span class="c1">## NOTE: No need to edit, this will show your renamed data</span>
<span class="n">df_q1</span>
</pre></div>
</div>
</div>
</div>
<p>Use the following to check your work:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NO NEED TO EDIT; use this to check your work</span>
<span class="k">assert</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df_q1</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;obs_1&quot;</span><span class="p">,</span> <span class="s2">&quot;area_1&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma_1&quot;</span><span class="p">,</span> <span class="s2">&quot;obs_2&quot;</span><span class="p">,</span> <span class="s2">&quot;area_2&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma_2&quot;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now the column names are much shorter, but we’ve</p>
</div>
<div class="section" id="q2-complete-the-data-dictionary-below-to-document-the-units-associated-with-the-short-column-names">
<h3><strong>Q2</strong>: Complete the <em>data dictionary</em> below to document the units associated with the short column names.<a class="headerlink" href="#q2-complete-the-data-dictionary-below-to-document-the-units-associated-with-the-short-column-names" title="Permalink to this headline">¶</a></h3>
<p><em>Note</em>: Weibull in his (1939) paper reports these stress values in units <code class="docutils literal notranslate"><span class="pre">kg</span> <span class="pre">/</span> <span class="pre">mm^2</span></code>. This is strange; we’ll return to this later!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_tabula</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Units</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">obs_1</span></code></p></td>
<td><p>(Unitless)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">area_1</span></code>,</p></td>
<td><p>???</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sigma_1</span></code></p></td>
<td><p>???</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">obs_2</span></code></p></td>
<td><p>???</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">area_2</span></code>,</p></td>
<td><p>???</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sigma_2</span></code></p></td>
<td><p>???</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="pivoting">
<h2>Pivoting<a class="headerlink" href="#pivoting" title="Permalink to this headline">¶</a></h2>
<p>Note that the data are in a rather strange layout; the first three columns report the specimen number (<code class="docutils literal notranslate"><span class="pre">obs_1</span></code>), cross-sectional area (<code class="docutils literal notranslate"><span class="pre">area_1</span></code>), and measured stress (<code class="docutils literal notranslate"><span class="pre">sigma_1</span></code>) for all the observations up to <code class="docutils literal notranslate"><span class="pre">13</span></code>. Then the last three columns report the same quantities starting at observation <code class="docutils literal notranslate"><span class="pre">14</span></code>. This sort of layout with “two blocks” is <em>convenient</em> for reporting values in a compact form, but it is <em>highly inconvenient</em> for doing analysis, as we’ll see next.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_q1</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Imagine we wanted to compute some simple statistics on these data, say the mean of the stress values. Since the data come in two blocks, we have to access them separately:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sigma_mean_1</span> <span class="o">=</span> <span class="n">df_q1</span><span class="o">.</span><span class="n">sigma_1</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">sigma_mean_2</span> <span class="o">=</span> <span class="n">df_q1</span><span class="o">.</span><span class="n">sigma_2</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean 1: </span><span class="si">{0:4.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sigma_mean_1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean 2: </span><span class="si">{0:4.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sigma_mean_2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>We could do something hacky to combine the two:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sigma_mean_both</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="n">sigma_mean_1</span> <span class="o">+</span> <span class="mi">11</span> <span class="o">*</span> <span class="n">sigma_mean_2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">12</span> <span class="o">+</span> <span class="mi">11</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean both: </span><span class="si">{0:4.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sigma_mean_both</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>But it would be far easier if we could just <em>combine</em> all the relevant columns so they’re not in “blocks.” This is what <strong>pivoting</strong> a dataset allows us to do:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit; you&#39;ll learn this in the evening&#39;s notebook</span>
<span class="n">df_long</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_q1</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_pivot_longer</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;obs_1&quot;</span><span class="p">,</span> <span class="s2">&quot;area_1&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma_1&quot;</span><span class="p">,</span> <span class="s2">&quot;obs_2&quot;</span><span class="p">,</span> <span class="s2">&quot;area_2&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma_2&quot;</span><span class="p">],</span>
        <span class="n">names_to</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.value&quot;</span><span class="p">,</span> <span class="s2">&quot;block&quot;</span><span class="p">],</span>
        <span class="n">names_sep</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_arrange</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">obs</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">df_long</span>
</pre></div>
</div>
</div>
</div>
<p>Pivoting is one of the key tools we need to <em>tidy</em> our data.</p>
</div>
<div class="section" id="tidy-data">
<h2>Tidy Data<a class="headerlink" href="#tidy-data" title="Permalink to this headline">¶</a></h2>
<p><em>Tidy data</em> is a very simple—but very powerful—idea. The image below gives the definition of tidy data.</p>
<p><img alt="In tidy data: each variable forms a column, each observation forms a row, each cell is a single measurement." src="../_images/tidydata_1.jpg" /></p>
<p>Artwork by Allison Horst, <a class="reference external" href="https://www.openscapes.org/blog/2020/10/12/tidy-data/">generously released</a> under an open-source license!</p>
<p>The big payoff of making your data tidy is that <em>you don’t have to build special-purpose tools to work with your data</em>. Since every untidy dataset is untidy in its own unique (hideous) way, you would have to build special-purpose tools for every untidy dataset. By having one standard form of data, you can use the same tools for every dataset.</p>
<p><img alt="Comical cartoon comparing tools for tidy data and tools for untidy data." src="../_images/tidydata_3.jpg" /></p>
<p>Let’s apply these ideas to the data we extracted using Tabula.</p>
<div class="section" id="q3-inspect-the-original-form-of-the-data-why-are-these-data-not-tidy-how-would-you-make-the-data-tidy">
<h3><strong>Q3</strong>: Inspect the original form of the data. Why are these data not tidy? How would you make the data tidy?<a class="headerlink" href="#q3-inspect-the-original-form-of-the-data-why-are-these-data-not-tidy-how-would-you-make-the-data-tidy" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NO NEED TO EDIT; run and inspect</span>
<span class="n">df_tabula</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>(Your response here)</p></li>
</ul>
</div>
</div>
<div class="section" id="data-wrangling">
<h2>Data Wrangling<a class="headerlink" href="#data-wrangling" title="Permalink to this headline">¶</a></h2>
<p>Even once our data are <em>tidy</em>, they still might not be as usable as we might like. Another, less well-defined aspect of making data usable is <em>wrangling</em> the data into a more useful form. We’ll talk about a few aspects we might need to wrangle our data to fix: unit conversion, filtering, and data types.</p>
<div class="section" id="unit-conversion">
<h3>Unit conversion<a class="headerlink" href="#unit-conversion" title="Permalink to this headline">¶</a></h3>
<p>Weibull reports the <span class="math notranslate nohighlight">\(\sigma_d\)</span> values in <code class="docutils literal notranslate"><span class="pre">kg</span> <span class="pre">/</span> <span class="pre">mm^2</span></code>; if we interpret <code class="docutils literal notranslate"><span class="pre">kg</span></code> as a kilogram (mass) then these can’t be stress values! However, suppose for a moment that he were using <code class="docutils literal notranslate"><span class="pre">kg</span></code> to denote a kilogram-force, where <span class="math notranslate nohighlight">\(1 \text{kgf} = 1 \text{kg} \times 9.8 m/s^2\)</span>.</p>
<p>Weibull gives a summary value for the same stress in the more interpretable units <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">/</span> <span class="pre">(cm</span> <span class="pre">s^2)</span></code>. Let’s check this hypothesis by comparing the proposed unit converstion with our data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># (540 x 10^5 g/(cm s^2)) / (980 cm/s^2) * (kg / 1000 g) * (cm^2 / 100 mm^2)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Calculated: </span><span class="si">{0:4.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">540e5</span> <span class="o">/</span> <span class="mi">980</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">df_long</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>This is very near the <code class="docutils literal notranslate"><span class="pre">sigma</span></code> values we have in our dataset, which lends a great deal of credibility to our interpretation of <code class="docutils literal notranslate"><span class="pre">kg</span></code> as <code class="docutils literal notranslate"><span class="pre">kgf</span></code>. With this determined, we can make a unit conversation to more standard units.</p>
<div class="math notranslate nohighlight">
\[\text{kgf} / \text{mm}^2 = 9.8 \text{MPa}\]</div>
</div>
<div class="section" id="q4-convert-the-units-to-mpa">
<h3><strong>Q4</strong>: Convert the units to MPa.<a class="headerlink" href="#q4-convert-the-units-to-mpa" title="Permalink to this headline">¶</a></h3>
<p>Replace the factor of <code class="docutils literal notranslate"><span class="pre">1.0</span></code> below to convert the units to MPa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Replace the 1.0 factor with the correct conversion factor</span>
<span class="c1">###</span>


<span class="n">df_q4</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_long</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span><span class="n">sigma_MPa</span><span class="o">=</span><span class="n">DF</span><span class="o">.</span><span class="n">sigma</span> <span class="o">*</span> <span class="mf">1.0</span><span class="p">)</span> <span class="c1"># Replace 1.0 with correct factor</span>

<span class="p">)</span>

<span class="n">df_q4</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="filtering-invalid-values">
<h3>Filtering invalid values<a class="headerlink" href="#filtering-invalid-values" title="Permalink to this headline">¶</a></h3>
<p>If we take a look at the end of the dataset, we see some strange <code class="docutils literal notranslate"><span class="pre">NaN</span></code> entries:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="n">df_q4</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The value <code class="docutils literal notranslate"><span class="pre">NaN</span></code> is a special value that denotes <em>Not a Number</em>. Essentially, this is the way we represent something invalid. <code class="docutils literal notranslate"><span class="pre">NaN</span></code> can represent a missing value, a failed type conversion, or any of a variety of ways something can fail to be a number.</p>
<p>Often, the way we deal with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values is simply to remove the offending row from our dataset. We can do that with a <em>filter</em> operation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="n">df_filtered</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_q4</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">not_nan</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">sigma_MPa</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">df_filtered</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="converting-types">
<h3>Converting types<a class="headerlink" href="#converting-types" title="Permalink to this headline">¶</a></h3>
<p>Lastly, it’s worth noting that all of our columns have a <em>data type</em> associated with them. We can inspect that type with the <code class="docutils literal notranslate"><span class="pre">dtypes</span></code> attribute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="n">df_q4</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">float64</span></code> is a way of representing a decimal value. The <code class="docutils literal notranslate"><span class="pre">area</span></code> and stress values we’d expect to be decimal values, but what’s up with <code class="docutils literal notranslate"><span class="pre">block</span></code> and <code class="docutils literal notranslate"><span class="pre">obs</span></code>? We’d expect those to be integers. If the types of your columns are not what you’d expect, you can do a <a class="reference external" href="https://en.wikipedia.org/wiki/Type_conversion">type conversion</a> to attempt a converstion from one data type to a desired type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="n">df_converted</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_filtered</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span>
        <span class="n">block</span><span class="o">=</span><span class="n">gr</span><span class="o">.</span><span class="n">as_int</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">block</span><span class="p">),</span>
        <span class="n">obs</span><span class="o">=</span><span class="n">gr</span><span class="o">.</span><span class="n">as_int</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">obs</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">df_converted</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>We’ll see more about casting in the evening notebook. But now, we have a tidy and wrangled dataset!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="n">df_converted</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="bonus-the-payoff-of-tidying-and-wrangling">
<h2>Bonus: The Payoff of Tidying and Wrangling<a class="headerlink" href="#bonus-the-payoff-of-tidying-and-wrangling" title="Permalink to this headline">¶</a></h2>
<p>As a preview for why we want to learn how to tidy and wrangle data, let’s see what some of these tidy data tools will allow us to do. The <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/">plotnine</a> package is a plotting package designed for tidy data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="kn">import</span> <span class="nn">plotnine</span> <span class="k">as</span> <span class="nn">pt</span>
</pre></div>
</div>
</div>
</div>
<p>Using plotnine, we can very quickly construct simple graphs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_converted</span>
    <span class="o">&gt;&gt;</span> <span class="n">pt</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma_MPa&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">pt</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Part of the power of plotnine (over other graphing software) is that we can very easily tweak our graphs to show additional information. For instance, if we also wanted to see if the samples in the two blocks were at all different, we could easily color the points.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_converted</span>
    <span class="o">&gt;&gt;</span> <span class="n">pt</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;sigma_MPa&quot;</span><span class="p">))</span>
<span class="c1">#     + pt.geom_point() # Original</span>
    <span class="o">+</span> <span class="n">pt</span><span class="o">.</span><span class="n">geom_point</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;block&quot;</span><span class="p">))</span> <span class="c1"># Modified for color</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We’ll learn more about plotnine and visualization in tomorrow’s workshop exercises.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="01_python_assignment.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Intro to Python and Jupyter Notebooks</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="03_data_assignment.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Programmatic Data Operations</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Zachary del Rosario<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>