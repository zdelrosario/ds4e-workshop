

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>(Day 2) Visualization in Python &#8212; DS4E</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/04_vis_assignment';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="(Day 2) Exercises in Machine Learning" href="05_ml_assignment.html" />
    <link rel="prev" title="Principles of Visualization" href="../vis.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    <p class="title logo__title">DS4E</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Data Science for Engineers (2023 Workshop)
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Software Setup</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../exercises.html">Exercise Notebooks</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="00_python_assignment.html">(Pre) Intro to Python and Jupyter Notebooks</a></li>



<li class="toctree-l2"><a class="reference internal" href="01_tabula-webplotdigitizer_assignment.html">(Day 1) Data Extraction and Management</a></li>

<li class="toctree-l2"><a class="reference internal" href="../targeting.html">Targeting Variability</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_tidy_assignment.html">(Day 1) Intro to Data Wrangling and Tidying</a></li>

<li class="toctree-l2"><a class="reference internal" href="03_data_assignment.html">(Take-home) Programmatic Data Operations</a></li>

<li class="toctree-l2"><a class="reference internal" href="../vis.html">Principles of Visualization</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">(Day 2) Visualization in Python</a></li>

<li class="toctree-l2"><a class="reference internal" href="05_ml_assignment.html">(Day 2) Exercises in Machine Learning</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../slides.html">Slides</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/zdelrosario/Materials Informatics 101" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/zdelrosario/Materials Informatics 101/issues/new?title=Issue%20on%20page%20%2Fnotebooks/04_vis_assignment.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/04_vis_assignment.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>(Day 2) Visualization in Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">(Day 2) Visualization in Python</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-outcomes">Learning outcomes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-bit-of-wrangling">A Bit of Wrangling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-with-plotnine">Visualizing with Plotnine</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q1-study-the-magnesium-content"><strong>Q1</strong>: Study the Magnesium content</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q2-what-does-this-histogram-tell-you"><strong>Q2</strong>: What does this histogram tell you?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#elements-of-plotnine">Elements of Plotnine</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rule-1-of-histograms-play-with-the-bin-size">Rule #1 of Histograms: Play with the bin size</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q3-change-the-number-of-bins-in-the-histogram"><strong>Q3</strong>: Change the number of bins in the histogram</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q4-what-does-this-histogram-tell-us-about-magnesium-content"><strong>Q4</strong>: What does this histogram tell us about Magnesium content?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-geometry">Changing the geometry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q5-use-a-frequency-polygon-rather-than-a-histogram"><strong>Q5</strong>: Use a frequency polygon, rather than a histogram</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-aesthetics">Adding aesthetics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q6-add-an-aesthetic-for-the-alloy-series"><strong>Q6</strong>: Add an aesthetic for the alloy series</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reproducing-plots">Reproducing plots</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q7-reproduce-this-set-of-boxplots"><strong>Q7</strong>: Reproduce this set of boxplots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q8-what-does-this-boxplot-plot-tell-you"><strong>Q8</strong>: What does this boxplot plot tell you?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q9-reproduce-this-scatterplot"><strong>Q9</strong>: Reproduce this scatterplot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q10-what-does-this-scatterplot-tell-you"><strong>Q10</strong>: What does this scatterplot tell you?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dimension-reduction">Dimension Reduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q11-recreate-this-scatterplot-using-the-umap-data"><strong>Q11</strong>: Recreate this scatterplot using the UMAP data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q12-what-does-this-umap-plot-tell-you"><strong>Q12</strong>: What does this UMAP plot tell you?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bonus-plotly-vs-plotnine">BONUS: Plotly vs Plotnine</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#survey">Survey</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <!-- # Day 3 (Take-Home) Visualization in Python -->
<section class="tex2jax_ignore mathjax_ignore" id="day-2-visualization-in-python">
<h1>(Day 2) Visualization in Python<a class="headerlink" href="#day-2-visualization-in-python" title="Permalink to this heading">#</a></h1>
<p><em>Author</em>: Zach del Rosario</p>
<section id="learning-outcomes">
<h2>Learning outcomes<a class="headerlink" href="#learning-outcomes" title="Permalink to this heading">#</a></h2>
<p>By working through this notebook, you will be able to:</p>
<ul class="simple">
<li><p>Re-create a number of different plots using <code class="docutils literal notranslate"><span class="pre">plotnine</span></code>.</p></li>
<li><p>Draw conclusions about data using histograms, boxplots, and scatterplots.</p></li>
<li><p>Use an advanced dimension reduction technique to plot high-dimensional data: UMAP</p></li>
<li><p>Note when another visualization package—<code class="docutils literal notranslate"><span class="pre">plotly</span></code>—might be useful for interactive plots.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Setup</span>
<span class="kn">import</span> <span class="nn">grama</span> <span class="k">as</span> <span class="nn">gr</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="n">DF</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Intention</span><span class="p">()</span>

<span class="c1"># Show all pandas columns</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">&quot;display.max_columns&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="c1"># For downloading data</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="a-bit-of-wrangling">
<h2>A Bit of Wrangling<a class="headerlink" href="#a-bit-of-wrangling" title="Permalink to this heading">#</a></h2>
<p>Let’s download a dataset to use for this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filename for local data</span>
<span class="n">filename_data</span> <span class="o">=</span> <span class="s2">&quot;./data/alloys.csv&quot;</span>

<span class="c1"># The following code downloads the data, or (after downloaded)</span>
<span class="c1"># loads the data from a cached CSV on your machine</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename_data</span><span class="p">):</span>
    <span class="c1"># Make request for data</span>
    <span class="n">url_data</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/zdelrosario/mi101/main/mi101/data/wiki_comp.csv&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url_data</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">filename_data</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   Alloy data downloaded from public Google sheet&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Note data already exists</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;    Alloy data loaded locally&quot;</span><span class="p">)</span>
    
<span class="c1"># Read the data into memory</span>
<span class="n">df_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is a dataset about Aluminum alloys, scraped from <a class="reference external" href="https://en.wikipedia.org/wiki/Aluminium_alloy#Wrought_alloys">Wikipedia</a>. The <code class="docutils literal notranslate"><span class="pre">alloy</span></code> column identifies the specific alloy, <code class="docutils literal notranslate"><span class="pre">al_percent</span></code> gives the percent Aluminum content (by weight), and the remaining columns give other alloying elements. From the “head” of the data (the first few observations) we can see the alloying elements are <em>sparse</em>—many of the entries are zero.</p>
<p>When studying a new dataset, it’s always a good idea to do some simple ‘first checks’ before going straight to visualizing. We’ll see from these first checks that we need to do some wrangling.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the data&#39;s shape</span>
<span class="n">df_raw</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
<p>We have 137 observations on 28 variables. Because there are so many variables, these data will be difficult to visualize!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Glimpse the data</span>
<span class="n">df_raw</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We have the alloy designation, the aluminum percentage, and a percentage associated with each alloying element (by weight). To better categorize alloys, we might like to create a <code class="docutils literal notranslate"><span class="pre">series</span></code> column that gives the first digit of the <code class="docutils literal notranslate"><span class="pre">alloy</span></code> column. Since the <code class="docutils literal notranslate"><span class="pre">alloy</span></code> values all seem to be integers, it seems like we might be able to do this by doing a floor-division by 1000. However, let’s inspect the datatypes before we try that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the data types</span>
<span class="n">df_raw</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>Hmmm, the <code class="docutils literal notranslate"><span class="pre">alloy</span></code> column is an object. When we’ve seen that before, it’s meant the underlying entries are strings. Maybe there are some special characters in some of the alloy identifiers?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_raw</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">str_detect</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">alloy</span><span class="p">,</span> <span class="s2">&quot;[^</span><span class="se">\\</span><span class="s2">d]&quot;</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There are a few strange, special names in here! On the original Wiki article the <code class="docutils literal notranslate"><span class="pre">V-XXXX</span></code> alloys are listed under the 1000-Series alloys, so if we could just get the first digit in every <code class="docutils literal notranslate"><span class="pre">alloy</span></code> string, that would be our series number. The following code uses <a class="reference external" href="https://regexone.com/">regular expressions</a> to do just that (<code class="docutils literal notranslate"><span class="pre">\\d</span></code> means “any digit character”).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="c1">## This code extracts the first digit of the</span>
<span class="c1">## `alloy` column to create a `series` column</span>
<span class="n">df_alloys</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_raw</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span><span class="n">series</span><span class="o">=</span><span class="n">gr</span><span class="o">.</span><span class="n">str_extract</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">alloy</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">d&quot;</span><span class="p">))</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;series&quot;</span><span class="p">,</span> <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
<span class="p">)</span>
<span class="n">df_alloys</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We can run the filter again to check that we processed the special names the way we intended:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">str_detect</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">alloy</span><span class="p">,</span> <span class="s2">&quot;[^</span><span class="se">\\</span><span class="s2">d]&quot;</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Excellent! Now that we’ve prepped the data, we’re ready to start visualizing. Here’s a first example using plotnine.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;al_percent&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We’ll start learning plotnine by making changes to this visual.</p>
<blockquote>
<div><p><em>Aside</em>: The <code class="docutils literal notranslate"><span class="pre">ggplot</span></code> functionality in this notebook is provided by the <a class="reference external" href="https://plotnine.readthedocs.io/en/stable/">plotnine</a> package. However, plotnine is imported by grama, so you can access all of plotnine’s functions through <code class="docutils literal notranslate"><span class="pre">gr.</span></code> syntax.</p>
</div></blockquote>
</section>
<section id="visualizing-with-plotnine">
<h2>Visualizing with Plotnine<a class="headerlink" href="#visualizing-with-plotnine" title="Permalink to this heading">#</a></h2>
<hr class="docutils" />
<p><em>Note</em>: You’ll notice that plotnine graphs start with this weird <code class="docutils literal notranslate"><span class="pre">ggplot</span></code> call; that’s because plotnine is an <em>implementation of the <strong>g</strong>rammar of <strong>g</strong>raphics</em>. <a class="reference external" href="https://ggplot2.tidyverse.org/">Ggplot2</a> is another implementation of this concept, but that package is for the R programming language. Plotnine is essentially a port of ggplot2 into Python.</p>
<section id="q1-study-the-magnesium-content">
<h3><strong>Q1</strong>: Study the Magnesium content<a class="headerlink" href="#q1-study-the-magnesium-content" title="Permalink to this heading">#</a></h3>
<p>Modify the plot below to create a histogram of Magnesium content, rather than aluminum content.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Modify the plot below</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
<span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;al_percent&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="q2-what-does-this-histogram-tell-you">
<h3><strong>Q2</strong>: What does this histogram tell you?<a class="headerlink" href="#q2-what-does-this-histogram-tell-you" title="Permalink to this heading">#</a></h3>
<p>List <em>at least 3</em> observations conclusions about the data you can draw, based on the histogram above.</p>
<ul class="simple">
<li><p>(Write your observations here!)</p></li>
</ul>
</section>
<section id="elements-of-plotnine">
<h3>Elements of Plotnine<a class="headerlink" href="#elements-of-plotnine" title="Permalink to this heading">#</a></h3>
<p>You’ve already edited some plotnine code, but let’s break it down to better understand how plotnine works:</p>
<p><em>Anatomy of a ggplot</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_alloys</span>                   <span class="c1"># Data to visualize</span>
    
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span>               <span class="c1"># Initial call; starts a ggplot object</span>
    
        <span class="n">mapping</span><span class="o">=</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;Mg&quot;</span><span class="p">)</span>  <span class="c1"># Aesthetic mapping; we define how</span>
                                <span class="c1">#   columns in the dataset map to </span>
                                <span class="c1">#   aesthetics in the plot.</span>
    <span class="p">)</span>  
    
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">()</span>       <span class="c1"># Geometry; takes the aesthetic mapping</span>
                                <span class="c1">#   along with the data and produces</span>
                                <span class="c1">#   graphical elements.</span>
<span class="p">)</span>
</pre></div>
</div>
<p>With these basic ingredients—a dataset, a ggplot object, and a geometry—we have everything necessary to produce a simple plot. The <em>power</em> of the ggplot concept (implemented in plotnine) is that we can <em>very easily tweak graphs</em> starting from this minimal working code.</p>
</section>
<section id="rule-1-of-histograms-play-with-the-bin-size">
<h3>Rule #1 of Histograms: Play with the bin size<a class="headerlink" href="#rule-1-of-histograms-play-with-the-bin-size" title="Permalink to this heading">#</a></h3>
<p>Let’s practice using plotnine by enacting Rule #1 of histograms:</p>
<div class="admonition-rule-1-of-histograms-play-with-the-bin-size admonition">
<p class="admonition-title">Rule #1 of Histograms: Play with the bin size</p>
<p>When doing an analysis with a histogram, make sure to try multiple bin sizes to ensure you get a thorough sense of the data’s distribution.</p>
</div>
</section>
<section id="q3-change-the-number-of-bins-in-the-histogram">
<h3><strong>Q3</strong>: Change the number of bins in the histogram<a class="headerlink" href="#q3-change-the-number-of-bins-in-the-histogram" title="Permalink to this heading">#</a></h3>
<p>Note that <code class="docutils literal notranslate"><span class="pre">plotnine</span></code> gives us a <em>warning</em> that we ought to pick a more informed bin count. Change the bin count to a larger value below.</p>
<div class="admonition-accessing-documentation admonition">
<p class="admonition-title">Accessing documentation</p>
<p>Remember in the Python basics notebook we learned about accessing <em>documentation</em>. You can call <code class="docutils literal notranslate"><span class="pre">help(gr.geom_histogram)</span></code> or use the <code class="docutils literal notranslate"><span class="pre">Shift</span> <span class="pre">+</span> <span class="pre">Tab</span></code> method to read documentation on this geometry. This will tell you which argument to change in order to complete this exercise.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Modify the plot below to use a larger bin count</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
<span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;Mg&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="q4-what-does-this-histogram-tell-us-about-magnesium-content">
<h3><strong>Q4</strong>: What does this histogram tell us about Magnesium content?<a class="headerlink" href="#q4-what-does-this-histogram-tell-us-about-magnesium-content" title="Permalink to this heading">#</a></h3>
<p>Focus on what you can see in your <em>new</em> graph, as opposed to your previous graph.</p>
<ul class="simple">
<li><p>(Write your observations here!)</p></li>
</ul>
</section>
<section id="changing-the-geometry">
<h3>Changing the geometry<a class="headerlink" href="#changing-the-geometry" title="Permalink to this heading">#</a></h3>
<p>The specific <code class="docutils literal notranslate"><span class="pre">geom_*</span></code> call we use will determine which <em>geometry</em> is used to map the values to visual elements. Using plotnine, we can easily edit our visual by changing the <code class="docutils literal notranslate"><span class="pre">geom_*</span></code>.</p>
</section>
<section id="q5-use-a-frequency-polygon-rather-than-a-histogram">
<h3><strong>Q5</strong>: Use a frequency polygon, rather than a histogram<a class="headerlink" href="#q5-use-a-frequency-polygon-rather-than-a-histogram" title="Permalink to this heading">#</a></h3>
<p>The plotnine function for a frequency polygon is <code class="docutils literal notranslate"><span class="pre">gr.geom_freqpoly()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Modify the plot below to use a frequency polygon</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
<span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;Mg&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is a simple tweak, but it will be important for the next change we’ll make.</p>
</section>
<section id="adding-aesthetics">
<h3>Adding aesthetics<a class="headerlink" href="#adding-aesthetics" title="Permalink to this heading">#</a></h3>
<p>Part of the magic of ggplot is that it can <em>automatically</em> handle additional aesthetics, simply by changing the mapping. The <code class="docutils literal notranslate"><span class="pre">gr.aes(..)</span></code> can take additional keyword arguments, allowing us to visualize additional variables on the same plot.</p>
<p>For a histogram or frequency polygon, we must provide an x-coordinate. However, we can provide additional aesthetic mappings, such as <code class="docutils literal notranslate"><span class="pre">color</span></code> or <code class="docutils literal notranslate"><span class="pre">linetype</span></code>.</p>
<div class="admonition-ggplot-and-defauls admonition">
<p class="admonition-title">Ggplot and defauls</p>
<p>To make ggplot easy-to-use, it has a large variety of <em>default settings</em>, with the option to <em>override</em> those defaults. By default the <code class="docutils literal notranslate"><span class="pre">gr.aes()</span></code> function will assume your first two arguments are x and y; put differently this <code class="docutils literal notranslate"><span class="pre">gr.aes(x=&quot;var1&quot;,</span> <span class="pre">y=&quot;var2&quot;)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">gr.aes(&quot;var1&quot;,</span> <span class="pre">&quot;var2&quot;)</span></code>.</p>
</div>
</section>
<section id="q6-add-an-aesthetic-for-the-alloy-series">
<h3><strong>Q6</strong>: Add an aesthetic for the alloy series<a class="headerlink" href="#q6-add-an-aesthetic-for-the-alloy-series" title="Permalink to this heading">#</a></h3>
<p>Add an aesthetic mapping in <code class="docutils literal notranslate"><span class="pre">gr.aes(...)</span></code> to visualize the <code class="docutils literal notranslate"><span class="pre">&quot;series&quot;</span></code> column. Answer the questions below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Modify the plot below to add the &quot;series&quot; column to the plot</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
<span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;Mg&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_freqpoly</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em>:</p>
<ul class="simple">
<li><p>What kinds of questions can you answer with this plot that you couldn’t before?</p>
<ul>
<li><p>(Write your observations here!)</p></li>
</ul>
</li>
<li><p>Try switching the geometry back to a histogram; what happens? How interpretable is the resulting graph?</p>
<ul>
<li><p>(Write your observations here!)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="reproducing-plots">
<h2>Reproducing plots<a class="headerlink" href="#reproducing-plots" title="Permalink to this heading">#</a></h2>
<hr class="docutils" />
<p>Now that we’ve learned some basics of plotnine / ggplot, let’s take this learning further by reproducing some plots.</p>
<section id="q7-reproduce-this-set-of-boxplots">
<h3><strong>Q7</strong>: Reproduce this set of boxplots<a class="headerlink" href="#q7-reproduce-this-set-of-boxplots" title="Permalink to this heading">#</a></h3>
<p><em>Hint 1</em>: The plotnine function for a boxplot is <code class="docutils literal notranslate"><span class="pre">gr.geom_boxplot</span></code>.</p>
<p><em>Hint 2</em>: The grama function <code class="docutils literal notranslate"><span class="pre">gr.fct_reorder()</span></code> will help you re-order one variable in terms of a second variable. You can use this within a <code class="docutils literal notranslate"><span class="pre">gr.tf_mutate()</span></code> call to modify the ordering in the plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Reproduce the plot below</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
<p><img alt="Boxplot image to recreate" src="../_images/vis-boxplot.png" /></p>
<!-- task-end --></section>
<section id="q8-what-does-this-boxplot-plot-tell-you">
<h3><strong>Q8</strong>: What does this boxplot plot tell you?<a class="headerlink" href="#q8-what-does-this-boxplot-plot-tell-you" title="Permalink to this heading">#</a></h3>
<p>List <em>at least 3</em> observations conclusions about the data you can draw, based on the boxplots above.</p>
<ul class="simple">
<li><p>(Write your observations here!)</p></li>
</ul>
</section>
<section id="q9-reproduce-this-scatterplot">
<h3><strong>Q9</strong>: Reproduce this scatterplot<a class="headerlink" href="#q9-reproduce-this-scatterplot" title="Permalink to this heading">#</a></h3>
<p><em>Hint 1</em>: The plotnine function for a scatterplot is <code class="docutils literal notranslate"><span class="pre">gr.geom_point</span></code>.</p>
<p><em>Hint 2</em>: The plotnine function <code class="docutils literal notranslate"><span class="pre">gr.theme_minimal()</span></code> will strip away the grey, giving you a cleaner visual.</p>
<p><em>Hint 3</em>: The plotnine function <code class="docutils literal notranslate"><span class="pre">gr.labs()</span></code> will allow you to override the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> keyword arguments with your own labels.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Reproduce the plot below</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
<span class="c1"># (</span>
<span class="c1">#     df_alloys</span>
    
<span class="c1">#     &gt;&gt; pt.ggplot(pt.aes(&quot;al_percent&quot;, ))</span>
<span class="c1">#     + pt.geom_*</span>
<span class="c1">#     + pt.labs()</span>
<span class="c1"># )</span>
</pre></div>
</div>
</div>
</div>
<p><img alt="Scatterplot image to recreate" src="../_images/vis-scatter.png" /></p>
<!-- task-end --></section>
<section id="q10-what-does-this-scatterplot-tell-you">
<h3><strong>Q10</strong>: What does this scatterplot tell you?<a class="headerlink" href="#q10-what-does-this-scatterplot-tell-you" title="Permalink to this heading">#</a></h3>
<p>List <em>at least 3</em> observations about the data you can draw, based on the scatterplot above.</p>
<ul class="simple">
<li><p>(Write your observations here!)</p></li>
</ul>
</section>
</section>
<section id="dimension-reduction">
<h2>Dimension Reduction<a class="headerlink" href="#dimension-reduction" title="Permalink to this heading">#</a></h2>
<hr class="docutils" />
<p>Studying <em>all</em> the variables at once is difficult, as we cannot directly visualize 25-dimensional space! Instead, we will use <em>dimension reduction</em> techniques to visualize the data while preserving low-dimensional structure. We will illustrate one advanced technique: UMAP.</p>
<p><a class="reference external" href="https://umap-learn.readthedocs.io/en/latest/">UMAP</a> stands for <em>uniform manifold approximation</em>; this is a nonlinear dimension reduction technique. UMAP coordinates don’t have any physical interpretation, but the technique can frequently capture low-dimensional structure that PCA cannot. <a class="reference external" href="https://pair-code.github.io/understanding-umap/">This article</a> is a fantastic resource for understanding UMAP.</p>
<p>The following carries out a UMAP transformation of the alloy dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Perform UMAP reduction</span>
<span class="n">df_umap_data</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_alloys</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_drop</span><span class="p">(</span><span class="s2">&quot;alloy&quot;</span><span class="p">,</span> <span class="s2">&quot;series&quot;</span><span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_umap</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_bind_cols</span><span class="p">(</span><span class="n">df_alloys</span><span class="p">[[</span><span class="s2">&quot;alloy&quot;</span><span class="p">,</span> <span class="s2">&quot;series&quot;</span><span class="p">]])</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;series&quot;</span><span class="p">,</span> <span class="s2">&quot;alloy&quot;</span><span class="p">,</span> <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s inspect the UMAP-transformed data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_umap_data</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_head</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The original numerical features have been reduced to just two: <code class="docutils literal notranslate"><span class="pre">xi0</span></code> and <code class="docutils literal notranslate"><span class="pre">xi1</span></code>. We will use these two coordinates for plotting.</p>
<section id="q11-recreate-this-scatterplot-using-the-umap-data">
<h3><strong>Q11</strong>: Recreate this scatterplot using the UMAP data<a class="headerlink" href="#q11-recreate-this-scatterplot-using-the-umap-data" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Reproduce the plot below</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
<p><img alt="UMAP scatterplot image to recreate" src="../_images/vis-umap.png" /></p>
<!-- task-end --></section>
<section id="q12-what-does-this-umap-plot-tell-you">
<h3><strong>Q12</strong>: What does this UMAP plot tell you?<a class="headerlink" href="#q12-what-does-this-umap-plot-tell-you" title="Permalink to this heading">#</a></h3>
<p>List <em>at least 3</em> observations conclusions about the data you can draw, based on the scatterplot above.</p>
<ul class="simple">
<li><p>(Write your observations here!)</p></li>
</ul>
<div class="admonition-important-caveats-about-umap admonition">
<p class="admonition-title">Important caveats about UMAP!</p>
<p>Interpreting a UMAP plot is <a class="reference external" href="https://pair-code.github.io/understanding-umap/">subtle and challenging</a>, but also extremely powerful. One of the caveats of UMAP is that the coordinates themselves do not have a simple interpretation, so the location of clusters in the two coordinates fairly arbitrary. The distances between clusters is also not necessarily meaningful. A well-calibrated UMAP will tend to reveal clustering in the data, in which case points nearby in UMAP space can be understood to be close in the original space.</p>
</div>
</section>
</section>
<section id="bonus-plotly-vs-plotnine">
<h2>BONUS: Plotly vs Plotnine<a class="headerlink" href="#bonus-plotly-vs-plotnine" title="Permalink to this heading">#</a></h2>
<hr class="docutils" />
<p><a class="reference external" href="https://plotly.com/python/basic-charts/">This page</a> gives details on how to make a wide variety of charts with plotly. Below we re-create the UMAP plot using <code class="docutils literal notranslate"><span class="pre">px.scatter()</span></code>, which is documented <a class="reference external" href="https://plotly.com/python/line-and-scatter/">here</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Import plotly</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="c1"># Necessary to show plotly figures in Jupyter</span>
<span class="o">%</span><span class="k">matplotlib</span> widget
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">df_umap_data</span><span class="p">,</span> 
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;xi0&quot;</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;xi1&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;series&quot;</span><span class="p">,</span>
    <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;alloy&quot;</span><span class="p">],</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;UMAP Plot&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;xi0&quot;</span><span class="p">:</span> <span class="s2">&quot;UMAP Coordinate 1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xi1&quot;</span><span class="p">:</span> <span class="s2">&quot;UMAP Coordinate 2&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The advantage of Plotly is that the plot is <em>interactive</em>; try hovering your mouse over a data point to see which <em>specific</em> alloy is which, and try clicking-and-dragging to zoom in on a rectangular region. (You can also double-click to zoom back out.)</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="survey">
<h1>Survey<a class="headerlink" href="#survey" title="Permalink to this heading">#</a></h1>
<hr class="docutils" />
<p>Once you complete this activity, please fill out the following 30-second survey:</p>
<blockquote>
<div><p><a class="reference external" href="https://forms.gle/kRPoDiNNZcpy36Zq5">Survey link</a></p>
</div></blockquote>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../vis.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Principles of Visualization</p>
      </div>
    </a>
    <a class="right-next"
       href="05_ml_assignment.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">(Day 2) Exercises in Machine Learning</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">(Day 2) Visualization in Python</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-outcomes">Learning outcomes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-bit-of-wrangling">A Bit of Wrangling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizing-with-plotnine">Visualizing with Plotnine</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q1-study-the-magnesium-content"><strong>Q1</strong>: Study the Magnesium content</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q2-what-does-this-histogram-tell-you"><strong>Q2</strong>: What does this histogram tell you?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#elements-of-plotnine">Elements of Plotnine</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rule-1-of-histograms-play-with-the-bin-size">Rule #1 of Histograms: Play with the bin size</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q3-change-the-number-of-bins-in-the-histogram"><strong>Q3</strong>: Change the number of bins in the histogram</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q4-what-does-this-histogram-tell-us-about-magnesium-content"><strong>Q4</strong>: What does this histogram tell us about Magnesium content?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-geometry">Changing the geometry</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q5-use-a-frequency-polygon-rather-than-a-histogram"><strong>Q5</strong>: Use a frequency polygon, rather than a histogram</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-aesthetics">Adding aesthetics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q6-add-an-aesthetic-for-the-alloy-series"><strong>Q6</strong>: Add an aesthetic for the alloy series</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reproducing-plots">Reproducing plots</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q7-reproduce-this-set-of-boxplots"><strong>Q7</strong>: Reproduce this set of boxplots</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q8-what-does-this-boxplot-plot-tell-you"><strong>Q8</strong>: What does this boxplot plot tell you?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q9-reproduce-this-scatterplot"><strong>Q9</strong>: Reproduce this scatterplot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q10-what-does-this-scatterplot-tell-you"><strong>Q10</strong>: What does this scatterplot tell you?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dimension-reduction">Dimension Reduction</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q11-recreate-this-scatterplot-using-the-umap-data"><strong>Q11</strong>: Recreate this scatterplot using the UMAP data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q12-what-does-this-umap-plot-tell-you"><strong>Q12</strong>: What does this UMAP plot tell you?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bonus-plotly-vs-plotnine">BONUS: Plotly vs Plotnine</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#survey">Survey</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Zachary del Rosario
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>