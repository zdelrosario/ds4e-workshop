
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Programmatic Data Operations &#8212; Materials Informatics 101</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualization in Python" href="04_vis_assignment.html" />
    <link rel="prev" title="Intro to Data Wrangling and Tidy Data" href="02_tidy_assignment.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Materials Informatics 101</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Materials Informatics 101
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../setup.html">
   Software Setup
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../exercises.html">
   Exercise Notebooks
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="00_tabula-webplotdigitizer_assignment.html">
     Data Extraction and Management
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01_python_assignment.html">
     Intro to Python and Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02_tidy_assignment.html">
     Intro to Data Wrangling and Tidy Data
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Programmatic Data Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_vis_assignment.html">
     Visualization in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05_ml_assignment.html">
     Exercises in Machine Learning
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/03_data_assignment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/zdelrosario/Materials Informatics 101"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/zdelrosario/Materials Informatics 101/issues/new?title=Issue%20on%20page%20%2Fnotebooks/03_data_assignment.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/zdelrosario/Materials Informatics 101/main?urlpath=tree/docs/notebooks/03_data_assignment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-outcomes">
   Learning Outcomes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataframes">
   DataFrames
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q1-inspect-a-dataframe">
     <strong>
      Q1
     </strong>
     : Inspect a DataFrame
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#grama">
   Grama
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-pipe-operator">
     The pipe operator
     <code class="docutils literal notranslate">
      <span class="pre">
       &gt;&gt;
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#selecting">
     Selecting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q2-use-tf-select-to-select-the-formula-and-microstructure-columns-only">
     <strong>
      Q2
     </strong>
     : Use
     <code class="docutils literal notranslate">
      <span class="pre">
       tf_select
      </span>
     </code>
     to select the formula and microstructure columns only.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q3-use-a-selection-helper-to-find-all-of-the-columns-with-the-string-reference">
     <strong>
      Q3
     </strong>
     Use a selection helper to find
     <strong>
      all
     </strong>
     of the columns with the string
     <code class="docutils literal notranslate">
      <span class="pre">
       "REFERENCE"
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#renaming">
     Renaming
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#interlude-pipelines-and-the-data-pronoun">
   Interlude: Pipelines and the “Data Pronoun”
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q4-re-write-the-following-code-using-the-pipe-operator-and-data-pronoun">
     <strong>
      Q4
     </strong>
     Re-write the following code using the pipe operator and data pronoun
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#back-to-verbs">
   Back to Verbs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filtering">
     Filtering
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q5-filter-the-mpea-dataset-to-only-those-rows-with-a-valid-yield-strength-compare-the-original-number-of-rows-with-the-number-of-valid-rows">
     <strong>
      Q5
     </strong>
     Filter the MPEA dataset to only those rows with a valid Yield Strength. Compare the original number of rows with the number of valid rows.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mutating">
     Mutating
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q6-convert-the-weight-parts-per-million-wppm-of-oxygen-to-a-weight-percent">
     <strong>
      Q6
     </strong>
     Convert the weight parts per million (wppm) of Oxygen to a (weight) percent.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wrangling-data">
   Wrangling Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-converting">
     Data Converting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q7-fix-the-conversion-from-wppm-to-a-weight-percentage">
     <strong>
      Q7
     </strong>
     Fix the conversion from wppm to a weight percentage
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pivoting-data">
     Pivoting Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q8-pivot-df-stang-wide-longer-to-put-all-the-angle-values-in-cells">
     <strong>
      Q8
     </strong>
     Pivot
     <code class="docutils literal notranslate">
      <span class="pre">
       df_stang_wide
      </span>
     </code>
     longer to put all the angle values in cells
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q9-use-gr-tf-separate-to-separate-the-measurement-identifiers-e-mu-from-the-measurement-angles-make-sure-to-call-the-angle-column-angle">
     <strong>
      Q9
     </strong>
     Use
     <code class="docutils literal notranslate">
      <span class="pre">
       gr.tf_separate()
      </span>
     </code>
     to separate the measurement identifiers
     <code class="docutils literal notranslate">
      <span class="pre">
       "E",
      </span>
      <span class="pre">
       "mu"
      </span>
     </code>
     from the measurement angles. Make sure to call the angle column
     <code class="docutils literal notranslate">
      <span class="pre">
       "angle"
      </span>
     </code>
     .
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q10-pivot-the-data-wider-to-turn-the-measurement-identifiers-e-mu-back-into-column-names">
     <strong>
      Q10
     </strong>
     Pivot the data wider to turn the measurement identifiers
     <code class="docutils literal notranslate">
      <span class="pre">
       "E",
      </span>
      <span class="pre">
       "mu"
      </span>
     </code>
     back into column names.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bonus-one-step-pivot">
     Bonus: One-step pivot
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#endnotes">
   Endnotes
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="programmatic-data-operations">
<h1>Programmatic Data Operations<a class="headerlink" href="#programmatic-data-operations" title="Permalink to this headline">¶</a></h1>
<p><em>Author</em>: Zach del Rosario</p>
<p>The purpose of this exercise is to give you some tools to work with data <em>programmatically</em>; that is, using a programming language. While you can carry out many data operations by hand or with spreadsheet programs, you will see that doing things programmatically is extremely powerful.</p>
<div class="section" id="learning-outcomes">
<h2>Learning Outcomes<a class="headerlink" href="#learning-outcomes" title="Permalink to this headline">¶</a></h2>
<p>By working through this notebook, you will be able to:</p>
<ul class="simple">
<li><p>Use Pandas’ <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object to represent data</p></li>
<li><p>Use DataFrame operations from the package <code class="docutils literal notranslate"><span class="pre">py-grama</span></code> to operate on data</p></li>
<li><p>Use basic data checks: shapes, data types, head and tail</p></li>
<li><p>Perform fundamental data wrangling: type conversions, pivoting, filtering, mutating</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">grama</span> <span class="k">as</span> <span class="nn">gr</span>

<span class="n">DF</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Intention</span><span class="p">()</span>

<span class="c1"># For downloading data</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="dataframes">
<h2>DataFrames<a class="headerlink" href="#dataframes" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>A <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is a data structure provided by Pandas. In contrast with <code class="docutils literal notranslate"><span class="pre">lists</span></code> (which we saw in a previous exercise), DataFrames are explicitly designed to facilitate data analysis. Accordingly, they provide a number of helpful features that aid in data analysis and operations.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is a <em>rectangular</em> representation of data – it consists of rows and columns. If the data are <em>tidy</em>, then each <em>row</em> represents an <em>observation</em>, each <em>column</em> represents a <em>variable</em>, and each <em>cell</em> represents a single measurement.</p>
<p>For instance, the following code chunk downloads a alloy dataset into the DataFrame <code class="docutils literal notranslate"><span class="pre">df_mpea</span></code>—here each row is an alloy, and each column is some physical property of that alloy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filename for local data</span>
<span class="n">filename_data</span> <span class="o">=</span> <span class="s2">&quot;./data/mpea.csv&quot;</span>

<span class="c1"># The following code downloads the data, or (after downloaded)</span>
<span class="c1"># loads the data from a cached CSV on your machine</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename_data</span><span class="p">):</span>
    <span class="c1"># Make request for data</span>
    <span class="n">url_data</span> <span class="o">=</span> <span class="s2">&quot;https://docs.google.com/spreadsheets/u/1/d/1MsF4_jhWtEuZSvWfXLDHWEqLMScGCVXYWtqHW9Y7Yt0/export?format=csv&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url_data</span><span class="p">,</span> <span class="n">allow_redirects</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">filename_data</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   MPEA data downloaded from public Google sheet&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># Note data already exists</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;    MPEA data loaded locally&quot;</span><span class="p">)</span>
    
<span class="c1"># Read the data into memory</span>
<span class="n">df_mpea</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s use some of the basic attributes of the data to get some basic facts:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the shape</span>
<span class="n">df_mpea</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
<p>We have <code class="docutils literal notranslate"><span class="pre">1653</span></code> rows (also called observations) on 20 columns (also called variables or features).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_mpea</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">head</span></code> method shows just the top of the DataFrame; this is useful for “getting a sense” for what’s in the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_mpea</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">dtypes</span></code> attribute gives us the data type for each column. Depending on the dataset, you might find that your data loads in with strange datatypes. This can happen, for instance, if your numeric values are contained within string characters (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;1.23&quot;</span></code>). If this happens, you can catch the fact with a call to <code class="docutils literal notranslate"><span class="pre">df_data.dtypes</span></code>.</p>
<div class="section" id="q1-inspect-a-dataframe">
<h3><strong>Q1</strong>: Inspect a DataFrame<a class="headerlink" href="#q1-inspect-a-dataframe" title="Permalink to this headline">¶</a></h3>
<p>Consult the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html">pandas documentation</a> (it might be useful to use a page search) and use some basic calls on <code class="docutils literal notranslate"><span class="pre">df_mpea</span></code> to answer the following questions:</p>
<ul class="simple">
<li><p>What are the <em>last</em> five observations in the DataFrame?</p></li>
<li><p>How many rows are in <code class="docutils literal notranslate"><span class="pre">df_mpea</span></code>? How many columns?</p></li>
<li><p>How would you access the column <code class="docutils literal notranslate"><span class="pre">PROPERTY:</span> <span class="pre">Microstructure</span></code>?</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Inspect df_data</span>
<span class="c1"># TODO: Show the last five observations of df_mpea</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Inspect df_mpea</span>
<span class="c1"># TODO: Determine the number of rows and columns in df_mpea</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Inspect df_data</span>
<span class="c1"># TODO: Grab the column `PROPERTY: Microstructure` alone</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
<p>These manipulations are simple, but they are bread-and-butter for studying new datasets.</p>
</div>
</div>
<div class="section" id="grama">
<h2>Grama<a class="headerlink" href="#grama" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>The <code class="docutils literal notranslate"><span class="pre">py-grama</span></code> package builds on top of Pandas to provide a pipeline-based data (and model) infrastructure. Grama provides many of the same functions as Pandas (really, just different ways to use the same Pandas functions):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
   <span class="n">df_mpea</span>
   <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_head</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>One of the advantages of using <code class="docutils literal notranslate"><span class="pre">py-grama</span></code> is that we can write <em>data pipelines</em> to organize our data operations. For instance, the following code filters the MPEA dataset to only those cases that have a valid Yield Strength (YS) and Ultimate Tensile Strength (UTS), and computes a correlation coefficient between those two quantities.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit; run and see the result</span>
<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">not_nan</span><span class="p">(</span><span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: YS (MPa)&quot;</span><span class="p">]),</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">not_nan</span><span class="p">(</span><span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: UTS (MPa)&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_summarize</span><span class="p">(</span>
        <span class="n">rho_YS_UTS</span><span class="o">=</span><span class="n">gr</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span>
            <span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: YS (MPa)&quot;</span><span class="p">],</span>
            <span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: UTS (MPa)&quot;</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As we might expect, these two properties are strongly correlated.</p>
<p>This code shows off a few concepts, which we’ll explore below: The pipe operator <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>, Grama verbs (such as <code class="docutils literal notranslate"><span class="pre">tf_filter</span></code>), and the data pronoun <code class="docutils literal notranslate"><span class="pre">DF</span></code>.</p>
<div class="section" id="the-pipe-operator">
<h3>The pipe operator <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code><a class="headerlink" href="#the-pipe-operator" title="Permalink to this headline">¶</a></h3>
<p>It’s helpful to think of the pipe operator <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> as the words “and then”. That means code like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_pivot_longer</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Can be read something like an English sentence, where we are using various <em>verbs</em> to operate on the data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">Start</span> <span class="k">with</span> <span class="n">df_mpea</span>
    <span class="ow">and</span> <span class="n">then</span> <span class="nb">filter</span> <span class="n">the</span> <span class="n">data</span>
    <span class="ow">and</span> <span class="n">then</span> <span class="n">mutate</span> <span class="n">the</span> <span class="n">data</span>
    <span class="ow">and</span> <span class="n">then</span> <span class="n">pivot</span> <span class="n">the</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">to</span> <span class="n">a</span> <span class="n">longer</span> <span class="nb">format</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We don’t yet know what these verbs do; we’ll learn more in the exercises below!</p>
</div>
<div class="section" id="selecting">
<h3>Selecting<a class="headerlink" href="#selecting" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">tf_select</span></code> verb allows us to select one or more columns; this is helpful when we want to focus on just a handful of properties, such as the chemical formulas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;FORMULA&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can select multiple columns by providing multiple arguments.</p>
</div>
<div class="section" id="q2-use-tf-select-to-select-the-formula-and-microstructure-columns-only">
<h3><strong>Q2</strong>: Use <code class="docutils literal notranslate"><span class="pre">tf_select</span></code> to select the formula and microstructure columns only.<a class="headerlink" href="#q2-use-tf-select-to-select-the-formula-and-microstructure-columns-only" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Select the formula and microstructure columns only</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
<p>We can also use some <em>selection helpers</em> to make <code class="docutils literal notranslate"><span class="pre">tf_select</span></code> even more convenient. For instance, the <code class="docutils literal notranslate"><span class="pre">gr.everything()</span></code> function just selects all the columns, which at first seems silly:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_head</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>However, when we use <code class="docutils literal notranslate"><span class="pre">gr.everything()</span></code> <em>along</em> with specific columns, we can <em>re-arrange</em> the columns to make quick comparisons easier. For instance, let’s move the reference information to the left. We could then easily copy the DOI’s to find the original reference for each observation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;REFERENCE: doi&quot;</span><span class="p">,</span> <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_head</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There are a variety of other selection helpers, including:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gr.starts_with(...)</span></code> will select all columns that start with a given string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gr.ends_with(...)</span></code> will select all columns that end with a given string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gr.contains(...)</span></code> will select all columns that contain a given string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gr.matches(...)</span></code> will select all columns that match a given <a class="reference external" href="https://regexone.com/">regular expression</a></p></li>
</ul>
<p>You’ll practice using selection helpers in the next task.</p>
</div>
<div class="section" id="q3-use-a-selection-helper-to-find-all-of-the-columns-with-the-string-reference">
<h3><strong>Q3</strong> Use a selection helper to find <strong>all</strong> of the columns with the string <code class="docutils literal notranslate"><span class="pre">&quot;REFERENCE&quot;</span></code><a class="headerlink" href="#q3-use-a-selection-helper-to-find-all-of-the-columns-with-the-string-reference" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Select the formula and microstructure columns only</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="renaming">
<h3>Renaming<a class="headerlink" href="#renaming" title="Permalink to this headline">¶</a></h3>
<p>Aside from selecting columns, we can also make convenience modifications to the data. The verb <code class="docutils literal notranslate"><span class="pre">tf_rename</span></code> allows us to rename columns, usually to create a more compact, convenient name:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_rename</span><span class="p">(</span>
        <span class="n">microstructure</span><span class="o">=</span><span class="s2">&quot;PROPERTY: Microstructure&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_head</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is a good time to step aside from verbs to talk about the <em>data pronoun</em>.</p>
</div>
</div>
<div class="section" id="interlude-pipelines-and-the-data-pronoun">
<h2>Interlude: Pipelines and the “Data Pronoun”<a class="headerlink" href="#interlude-pipelines-and-the-data-pronoun" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>Imagine we wanted to search through the dataset to find only those materials with a FCC microstructure. Above, we gave the <code class="docutils literal notranslate"><span class="pre">microstructure</span></code> column a new, convenient name. We might like to use that new, convenient name when searching for FCC materials. However, we’re going to run into an issue:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: Try uncommenting and running the following code; it WILL break!</span>
<span class="c1"># (</span>
<span class="c1">#     df_mpea</span>
<span class="c1">#     &gt;&gt; gr.tf_rename(</span>
<span class="c1">#         microstructure=&quot;PROPERTY: Microstructure&quot;,</span>
<span class="c1">#     )</span>
<span class="c1">#     &gt;&gt; gr.tf_filter(</span>
<span class="c1">#         df_mpea[&quot;microstructure&quot;] == &quot;FCC&quot;</span>
<span class="c1">#     )</span>
<span class="c1"># )</span>
</pre></div>
</div>
</div>
</div>
<p>If we want to refer to the data <em>now</em>—as it is currently in the pipeline—we need a name to refer to that DataFrame. This is where the <em>data pronoun</em> comes in; remember when we ran this line way up above in the setup chunk?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DF</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Intention</span><span class="p">()</span>
</pre></div>
</div>
<p>This assigns the data pronoun to the name <code class="docutils literal notranslate"><span class="pre">DF</span></code>. The data pronoun represents a DataFrame, so we can use things like column access <code class="docutils literal notranslate"><span class="pre">DF[&quot;column</span> <span class="pre">name&quot;]</span></code>. We can use this to take advantage of the new (shorter) name we gave to the microstructure column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_rename</span><span class="p">(</span>
        <span class="n">microstructure</span><span class="o">=</span><span class="s2">&quot;PROPERTY: Microstructure&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span>
        <span class="n">DF</span><span class="p">[</span><span class="s2">&quot;microstructure&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;FCC&quot;</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Together, the pipe operator <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> and the data pronoun <code class="docutils literal notranslate"><span class="pre">DF</span></code> form a powerful team that helps us do sophisticated data operations.</p>
<div class="section" id="q4-re-write-the-following-code-using-the-pipe-operator-and-data-pronoun">
<h3><strong>Q4</strong> Re-write the following code using the pipe operator and data pronoun<a class="headerlink" href="#q4-re-write-the-following-code-using-the-pipe-operator-and-data-pronoun" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Eliminate the intermediate variables by using the data pronoun</span>
<span class="c1">###</span>

<span class="c1"># -- NO NEED TO EDIT; REWRITE THIS CODE -----</span>
<span class="c1"># Set up a simple dataset</span>
<span class="n">df_initial</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">df_make</span><span class="p">(</span>
    <span class="n">A</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="n">longcolumnname</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_initial</span><span class="p">)</span>

<span class="n">df_new</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_initial</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_rename</span><span class="p">(</span><span class="n">B</span><span class="o">=</span><span class="s2">&quot;longcolumnname&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span>
    <span class="n">df_new</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span><span class="n">df_new</span><span class="o">.</span><span class="n">B</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
<span class="p">(</span>
    <span class="n">df_initial</span>
    <span class="c1"># Use pipes &gt;&gt; and the data pronoun DF;</span>
    <span class="c1"># you should only need two lines of code</span>

<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="back-to-verbs">
<h2>Back to Verbs<a class="headerlink" href="#back-to-verbs" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<div class="section" id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
<p>We saw <code class="docutils literal notranslate"><span class="pre">tf_filter</span></code> above; this allows us to filter a dataset to only those rows satisfying some logical criterion. This makes answering basic questions about the data very easy. For instance, we might be interested in a particular processing method; we could find only those rows matching a specified method:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span><span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: Processing method&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;POWDER&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Notice that not all of the cells have useful values; some have <code class="docutils literal notranslate"><span class="pre">NaN</span></code> as their value (which means Not a Number). These could be due to any of a number of potential issues; perhaps the original reference did not report that value, meaning that information exists but is missing.</p>
<p>There are some helper functions to help deal with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values in filters: <code class="docutils literal notranslate"><span class="pre">gr.not_nan(df.column)</span></code> will return <code class="docutils literal notranslate"><span class="pre">True</span></code> when its input is not <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, while <code class="docutils literal notranslate"><span class="pre">gr.is_nan(df.column)</span></code> will do the reverse.</p>
</div>
<div class="section" id="q5-filter-the-mpea-dataset-to-only-those-rows-with-a-valid-yield-strength-compare-the-original-number-of-rows-with-the-number-of-valid-rows">
<h3><strong>Q5</strong> Filter the MPEA dataset to only those rows with a valid Yield Strength. Compare the original number of rows with the number of valid rows.<a class="headerlink" href="#q5-filter-the-mpea-dataset-to-only-those-rows-with-a-valid-yield-strength-compare-the-original-number-of-rows-with-the-number-of-valid-rows" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Filter the data to find the non-NaN Yield Strength values</span>
<span class="c1">###</span>

<span class="c1"># -- NO NEED TO EDIT; USE FOR COMPARISON -----</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original shape: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">df_mpea</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>

<span class="c1"># -- WRITE YOUR CODE BELOW -----</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="mutating">
<h3>Mutating<a class="headerlink" href="#mutating" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">tf_mutate</span></code> verb allows us to create / modify columns based on existing column values. For instance, we could use a mutation to convert the units in a column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span>
        <span class="n">E_MPa</span> <span class="o">=</span> <span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: Young modulus (GPa)&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;E_MPa&quot;</span><span class="p">,</span> <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This might be useful if we aimed to compare two quantities; elasticity and ultimate tensile strength are somewhat related properties, so we might want to compare them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span>
        <span class="n">E_MPa</span> <span class="o">=</span> <span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: Young modulus (GPa)&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_rename</span><span class="p">(</span>
        <span class="n">UTS_MPa</span> <span class="o">=</span> <span class="s2">&quot;PROPERTY: UTS (MPa)&quot;</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">not_nan</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">UTS_MPa</span><span class="p">),</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">not_nan</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">E_MPa</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span>
        <span class="s2">&quot;UTS_MPa&quot;</span><span class="p">,</span>
        <span class="s2">&quot;E_MPa&quot;</span><span class="p">,</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">(),</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="q6-convert-the-weight-parts-per-million-wppm-of-oxygen-to-a-weight-percent">
<h3><strong>Q6</strong> Convert the weight parts per million (wppm) of Oxygen to a (weight) percent.<a class="headerlink" href="#q6-convert-the-weight-parts-per-million-wppm-of-oxygen-to-a-weight-percent" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Convert wppm to a weight percentage</span>
<span class="c1"># NOTE: There is some scaffolding code; you need only</span>
<span class="c1">#       write the call to tf_mutate</span>
<span class="c1">###</span>

<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_filter</span><span class="p">(</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">not_nan</span><span class="p">(</span><span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: O content (wppm)&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
<span class="c1"># -- WRITE YOUR CODE HERE -----</span>
    <span class="c1">## TODO: Use gr.tf_mutate to do the conversion</span>

    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;O_percent&quot;</span><span class="p">,</span> <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_head</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="wrangling-data">
<h2>Wrangling Data<a class="headerlink" href="#wrangling-data" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p>With these basic tools—data pipelines and verbs—we have many of the tools we need to do <em>data wrangling</em>. <em>Very</em> frequently, data are messy and unusable; we need to do some <em>wrangling</em> to get our data into-shape for analysis. The last few tasks will focus on key steps in data wrangling.</p>
<div class="section" id="data-converting">
<h3>Data Converting<a class="headerlink" href="#data-converting" title="Permalink to this headline">¶</a></h3>
<p>There’s something wrong with the Nitrogen content column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">))</span>
<span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>The Oxygen and Carbon content columns are fine—they’re <code class="docutils literal notranslate"><span class="pre">float64</span></code>, which is a numeric type as we’d expect. But the Nitrogen content is an <code class="docutils literal notranslate"><span class="pre">object</span></code>. Let’s see what specific values this column takes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span>
    <span class="n">df_mpea</span><span class="p">[</span><span class="s2">&quot;PROPERTY: N content (wppm)&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-use-of-set admonition">
<p class="admonition-title">Use of set</p>
<p>The <code class="docutils literal notranslate"><span class="pre">set</span></code> datatype only allows one of each unique value; calling <code class="docutils literal notranslate"><span class="pre">set()</span></code> on a column is a simple way to find all the unique values in a column.</p>
</div>
<p>It seems that the original data are mixed; some values are a numeric ppm value, while others are the qualitative statement <code class="docutils literal notranslate"><span class="pre">&quot;undetectable&quot;</span></code> (and yet others are simply missing). We can use the Grama helper <code class="docutils literal notranslate"><span class="pre">gr.as_numeric()</span></code> to help convert the data to a numeric type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_rename</span><span class="p">(</span><span class="n">N_wppm</span><span class="o">=</span><span class="s2">&quot;PROPERTY: N content (wppm)&quot;</span><span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span><span class="n">N_converted</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">as_numeric</span><span class="p">(</span><span class="n">DF</span><span class="o">.</span><span class="n">N_wppm</span><span class="p">))</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="s2">&quot;N_wppm&quot;</span><span class="p">,</span> <span class="s2">&quot;N_converted&quot;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
</div>
<p>With this type conversion, we can express all three element columns as percentages.</p>
</div>
<div class="section" id="q7-fix-the-conversion-from-wppm-to-a-weight-percentage">
<h3><strong>Q7</strong> Fix the conversion from wppm to a weight percentage<a class="headerlink" href="#q7-fix-the-conversion-from-wppm-to-a-weight-percentage" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Fix the conversion of N wppm</span>
<span class="c1"># NOTE: There is some scaffolding code; you need only</span>
<span class="c1">#       edit one line</span>
<span class="c1">###</span>

<span class="p">(</span>
    <span class="n">df_mpea</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span>
        <span class="n">O_percent</span><span class="o">=</span><span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: O content (wppm)&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="mf">1e6</span><span class="p">,</span>
        <span class="n">C_percent</span><span class="o">=</span><span class="n">DF</span><span class="p">[</span><span class="s2">&quot;PROPERTY: C content (wppm)&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">/</span> <span class="mf">1e6</span><span class="p">,</span>

<span class="c1">## --- WRITE YOUR CODE HERE -----</span>
        <span class="c1">## TODO: Fix the following line of code</span>
<span class="c1">#         N_percent=DF[&quot;PROPERTY: N content (wppm)&quot;] * 100 / 1e6</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_select</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">),</span> <span class="n">gr</span><span class="o">.</span><span class="n">everything</span><span class="p">())</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="pivoting-data">
<h3>Pivoting Data<a class="headerlink" href="#pivoting-data" title="Permalink to this headline">¶</a></h3>
<p>Another common data issue is when our data are in the wrong <em>shape</em>. To illustrate, let’s look at another dataset:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">grama.data</span> <span class="kn">import</span> <span class="n">df_stang_wide</span>
<span class="n">df_stang_wide</span>
</pre></div>
</div>
</div>
</div>
<p>These are observations on different samples of the same rolled aluminum alloy, with measurements taken at different angles relative to the direction of rolling. Note that the relative angle <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">45,</span> <span class="pre">90</span></code> is in the column names, rather than in cells. This means we would need to write special-purpose code in order to analyze these data.</p>
<p>Rather than re-invent our analysis code for every new dataset, we can instead <em>reshape</em> our data into a single, consistent format for a single set of analysis tools. To that end, we are going to reshape the data into a <a class="reference external" href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">tidy</a> format.</p>
<p>Our goal will be to wrangle this messy, wide dataset into tidy, long format, shown below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">grama.data</span> <span class="kn">import</span> <span class="n">df_stang</span>
<span class="n">df_stang</span>
</pre></div>
</div>
</div>
</div>
<p>To carry out this reshaping, we will use a set of <em>pivoting</em> tools. As a simple example, <code class="docutils literal notranslate"><span class="pre">gr.tf_pivot_longer()</span></code> takes a wide dataset and makes it longer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_tmp</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">gr</span><span class="o">.</span><span class="n">df_make</span><span class="p">(</span>
        <span class="n">A</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
        <span class="n">B</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
        <span class="n">C</span><span class="o">=</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_tmp</span><span class="p">)</span>

<span class="p">(</span>
    <span class="n">df_tmp</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_pivot_longer</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">],</span>
        <span class="n">names_to</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="n">values_to</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="q8-pivot-df-stang-wide-longer-to-put-all-the-angle-values-in-cells">
<h3><strong>Q8</strong> Pivot <code class="docutils literal notranslate"><span class="pre">df_stang_wide</span></code> longer to put all the angle values in cells<a class="headerlink" href="#q8-pivot-df-stang-wide-longer-to-put-all-the-angle-values-in-cells" title="Permalink to this headline">¶</a></h3>
<p><em>Hint 1</em>: Make sure to add an <code class="docutils literal notranslate"><span class="pre">observation</span></code> column with the <code class="docutils literal notranslate"><span class="pre">index_to</span></code> argument.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Pivot the data longer</span>
<span class="c1">###</span>

<span class="c1"># -- WRITE YOUR CODE HERE -----</span>

<span class="n">df_q8</span>
</pre></div>
</div>
</div>
</div>
<p>Execute the following to check your work.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">df_q8</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">54</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame is not sufficiently long; did you pivot?&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">df_q8</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have five columns&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="s2">&quot;observation&quot;</span> <span class="ow">in</span> <span class="n">df_q8</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have have an `&#39;observation&#39;` column&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we need to separate the measurement identifiers <code class="docutils literal notranslate"><span class="pre">&quot;E&quot;,</span> <span class="pre">&quot;mu&quot;</span></code> from the angle measurements. For that, we can use the <code class="docutils literal notranslate"><span class="pre">gr.tf_separate()</span></code> verb. This allows us to take string values and split them into separate columns, based on a separator character:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">gr</span><span class="o">.</span><span class="n">df_make</span><span class="p">(</span>
        <span class="n">combined</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a-1&quot;</span><span class="p">,</span> <span class="s2">&quot;b-2&quot;</span><span class="p">,</span> <span class="s2">&quot;c-3&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_separate</span><span class="p">(</span>
        <span class="n">column</span><span class="o">=</span><span class="s2">&quot;combined&quot;</span><span class="p">,</span>
        <span class="n">into</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;letter&quot;</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">],</span>
        <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="q9-use-gr-tf-separate-to-separate-the-measurement-identifiers-e-mu-from-the-measurement-angles-make-sure-to-call-the-angle-column-angle">
<h3><strong>Q9</strong> Use <code class="docutils literal notranslate"><span class="pre">gr.tf_separate()</span></code> to separate the measurement identifiers <code class="docutils literal notranslate"><span class="pre">&quot;E&quot;,</span> <span class="pre">&quot;mu&quot;</span></code> from the measurement angles. Make sure to call the angle column <code class="docutils literal notranslate"><span class="pre">&quot;angle&quot;</span></code>.<a class="headerlink" href="#q9-use-gr-tf-separate-to-separate-the-measurement-identifiers-e-mu-from-the-measurement-angles-make-sure-to-call-the-angle-column-angle" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Pivot the data longer</span>
<span class="c1">###</span>

<span class="n">df_q9</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_q8</span>
<span class="c1"># -- WRITE YOUR CODE HERE -----</span>
    <span class="c1">## Use gr.tf_separate()</span>

<span class="p">)</span>
<span class="n">df_q9</span>
</pre></div>
</div>
</div>
</div>
<p>Use the following code to check your work.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">df_q9</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">df_q8</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame is not the right length; how did that happen?&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">df_q9</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have six columns&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="s2">&quot;angle&quot;</span> <span class="ow">in</span> <span class="n">df_q9</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have an &#39;angle&#39; column&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We’re nearly there! Finally, we need to turn the measurement identifiers <code class="docutils literal notranslate"><span class="pre">&quot;E&quot;,</span> <span class="pre">&quot;mu&quot;</span></code> back into column names. We can do this by pivoting wider.</p>
</div>
<div class="section" id="q10-pivot-the-data-wider-to-turn-the-measurement-identifiers-e-mu-back-into-column-names">
<h3><strong>Q10</strong> Pivot the data wider to turn the measurement identifiers <code class="docutils literal notranslate"><span class="pre">&quot;E&quot;,</span> <span class="pre">&quot;mu&quot;</span></code> back into column names.<a class="headerlink" href="#q10-pivot-the-data-wider-to-turn-the-measurement-identifiers-e-mu-back-into-column-names" title="Permalink to this headline">¶</a></h3>
<p><em>Hint</em>: You should only need to set the <code class="docutils literal notranslate"><span class="pre">names_from</span></code> and <code class="docutils literal notranslate"><span class="pre">values_from</span></code> arguments with this function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###</span>
<span class="c1"># TASK: Pivot the data wider</span>
<span class="c1">###</span>

<span class="n">df_q10</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df_q9</span>
<span class="c1"># -- WRITE YOUR CODE HERE -----</span>
    <span class="c1">## Use gr.tf_pivot_wider()</span>

<span class="p">)</span>
<span class="n">df_q10</span>
</pre></div>
</div>
</div>
</div>
<p>Use the following code to check your work.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">df_q10</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">27</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame is not the right length; how did that happen?&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="s2">&quot;angle&quot;</span> <span class="ow">in</span> <span class="n">df_q10</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have an &#39;angle&#39; column&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="s2">&quot;E&quot;</span> <span class="ow">in</span> <span class="n">df_q10</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have an &#39;E&#39; column&quot;</span><span class="p">)</span>
    
<span class="k">try</span><span class="p">:</span>
    <span class="k">assert</span><span class="p">(</span><span class="s2">&quot;mu&quot;</span> <span class="ow">in</span> <span class="n">df_q10</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s2">&quot;The DataFrame should have an &#39;mu&#39; column&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="bonus-one-step-pivot">
<h3>Bonus: One-step pivot<a class="headerlink" href="#bonus-one-step-pivot" title="Permalink to this headline">¶</a></h3>
<p>As a closing, bonus demonstration, we illustrate some advanced options in <code class="docutils literal notranslate"><span class="pre">gr.tf_pivot_longer()</span></code> that would allow you to reshape the data in single call. This uses the <code class="docutils literal notranslate"><span class="pre">&quot;.value&quot;</span></code> special argument to signal that the values that would be placed in that <code class="docutils literal notranslate"><span class="pre">names_to</span></code> column should really be column names themselves; put differently, the <code class="docutils literal notranslate"><span class="pre">&quot;.value&quot;</span></code> keyword is like adding a pivot wider after the pivot longer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## NOTE: No need to edit</span>
<span class="p">(</span>
    <span class="n">df_stang_wide</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_pivot_longer</span><span class="p">(</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;E_00&quot;</span><span class="p">,</span> <span class="s2">&quot;mu_00&quot;</span><span class="p">,</span> <span class="s2">&quot;E_45&quot;</span><span class="p">,</span> <span class="s2">&quot;mu_45&quot;</span><span class="p">,</span> <span class="s2">&quot;E_90&quot;</span><span class="p">,</span> <span class="s2">&quot;mu_90&quot;</span><span class="p">],</span>
        <span class="n">names_to</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.value&quot;</span><span class="p">,</span> <span class="s2">&quot;angle&quot;</span><span class="p">],</span>
        <span class="n">names_sep</span><span class="o">=</span><span class="s2">&quot;_&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="endnotes">
<h2>Endnotes<a class="headerlink" href="#endnotes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The data portions of Grama make heavy use of ideas from the <a class="reference external" href="https://www.tidyverse.org/">Tidyverse</a>; specifically the <a class="reference external" href="https://dplyr.tidyverse.org/">dplyr</a> package. However, those packages are for the R programming language.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="02_tidy_assignment.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Intro to Data Wrangling and Tidy Data</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="04_vis_assignment.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Visualization in Python</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Zachary del Rosario<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>